function ToCart(){SubmitRX(),jQuery(".ong_cart").submit()}function CombineCart(e){event.preventDefault();var r=jQuery(e.target).data("ltype"),t=rx.prescription.get("ong","color_select",!1);if(jQuery("#pa_color").length>0&&(null===t||""===t))return rx.alert("Please select Frame color"),!1;if(jQuery("div#woosvimain img").length)var a=jQuery("div#woosvimain img").attr("src");else a=jQuery(".attachment-shop_single").length?jQuery(".attachment-shop_single:visible").attr("src"):jQuery("li[class=flex-active-slide]").children("img").attr("src");var s=jQuery("input[name='add-to-cart']").val(),i=jQuery("#total_price").val();window.loader.start(),jQuery.ajax({url:rx_params.url,method:"post",async:!1,data:{action:"combine_frame_lenses",total_price:i,price:rx_cart_params.price,fprice:rx_cart_params.fprice,frame_regular_price:rx_cart_params.frame_regular_price,d_mode:r,description:jQuery("#p_desc").html(),product_id:s,pimage:a}}).done(function(e){jQuery(".ong_cart").submit(),window.loader.stop()})}function load_lens_options(e){e.preventDefault();var r=jQuery(e.target).data("ltype"),t=rx.prescription.get("ong","color_select",!1);if(jQuery("#pa_color").length>0&&(null===t||""===t))return rx.alert("Please select Frame color"),!1;var a="";a=jQuery("div#woosvimain img").length?jQuery("div#woosvimain img").attr("src"):jQuery(".attachment-shop_single").length?jQuery(".attachment-shop_single:visible").attr("src"):jQuery("li[class=flex-active-slide]").children("img").attr("src");var s=jQuery("input[name='add-to-cart']").val();window.loader.start(),jQuery("#get_lenses").load(rx_params.url,{action:"rx_form",type:"GET",async:!0,price:rx_cart_params.price,fprice:rx_cart_params.fprice,frame_regular_price:rx_cart_params.frame_regular_price,d_mode:r,description:jQuery("#p_desc").html(),product_id:s,pimage:a},function(){jQuery(".yotpo-main-widget").hide(),jQuery(".product--right-content.large-8.columns").hide(),jQuery(".product-description-block").hide(),jQuery(".product--related-products").hide(),jQuery(".product--shipping-returns").hide(),jQuery(".onsale").hide(),jQuery(".images").hide(),jQuery(".summary").hide(),jQuery(".related").hide(),jQuery("#order_type").hide(),jQuery("#mirror_placeholder").hide(),rx.navigation.showNavControl(1),window.loader.stop()})}function showProgTooltip(){jQuery("#checkthis").dialog().prev(".ui-dialog-titlebar").find("a").hide(),jQuery("#checkthis").load("/rx/lens.html").dialog({modal:!0,height:530,width:800,position:[20,20],left:20,buttons:{Continue:function(){jQuery("#dummy_radio").hide(),jQuery("#rdo_p_allday").show(),jQuery("#rdo_p_allday").attr("checked",!0).trigger("click"),jQuery("#free_form").attr("checked",!0),rx.fee.showEnhanceRxAccuracy(),jQuery("#free_form").attr("disabled",!0),jQuery("#checkthis").dialog("close"),jQuery(".ui-dialog").remove()}}})}function showPDInfo(){jQuery("#mypd").load(rx_params.url,{action:"pdinfo",limit:25}).show()}function Reset_Review(){jQuery("#package_data_header").show(),jQuery("#package_image").show(),jQuery("#package_title").show()}function showTooltip(r){var t=jQuery("#"+r).attr("title");jQuery("#"+r).attr("title",""),jQuery("#"+r).append('<div id="tooltip"><div class="tipHeader"></div><div class="tipBody">'+t+"</div></div>"),jQuery("#tooltip").show(),jQuery("#tooltip").css("left",e.pageX+-30)}function hideTooltip(e){jQuery("#"+e).attr("title",jQuery(".tipBody").html()),jQuery("#"+e).children("div#tooltip").remove()}function ChangeAxis(e){}function ShowLROptions(){jQuery("#trans_options").show()}function EnhanceRxAccuracyClicked(){if(0===rx.get("freeform")){var e=rx.fee.getSingleEnhanceRxAccuracy();rx.price.set("enhance_rx_accuracy",e),rx.set("freeform",1)}else rx.fee.hideEnhanceRxAccuracy()}function clearCheck(e){var r="#div_"+e+"_check";jQuery(r).html(""),jQuery(r).removeClass("option_selected"),jQuery(r).addClass("selector_check_passive")}function SetColor(){jQuery("#pa_color").val(jQuery("#ong_color_select").val()).change()}function SubmitRX(){var e=rx.prescription.parseLenses,r=rx.prescription.parseRx,t=rx.prescription.getLenses()+rx.prescription.getRX(),a=rx.prescription.getLenses(),s=rx.prescription.getRX(),i=jQuery("#total_price").val(),o=jQuery("input[name='add-to-cart']").val(),n=JSON.stringify(rx.package.getAllData()),c=e(),p=r();window.loader.start(),jQuery.ajax({url:rx_params.url,type:"POST",data:wp.hooks.applyFilters("wdm_add_user_custom_data_options_data",{action:"wdm_add_user_custom_data_options",user_data:t,user_data_lenses:a,user_data_prescription:s,lenses:c,rx:p,total_price:i,lens_price:rx.price.get("lens"),rush_price:rx.price.get("rush"),product_id:o,all_data:n}),async:!1,success:function(e){window.loader.stop()}})}function SubmitToCart(){var e=jQuery("#total_price").val();window.loader.start(),jQuery.ajax({url:rx_params.url,type:"POST",data:{action:"wdm_add_user_custom_data_options",user_data:"Sunglasses",total_price:e},async:!1,success:function(e){window.loader.stop()}}),jQuery("#ong_cart").submit()}var Rx=function(){};String.prototype.pluralize=function(e,r){return null==r&&(r=this+"s"),1===e?this:r};var Warranty=function(e,r){return this.value=e,this.unit=r,this.format=function(){return this.value+" "+this.unit.pluralize(this.value)},this},Price=function(e){return this.sale_price=0,this.value=e,Array.isArray(e)?(this.price=parseFloat(e[0]),this.sale_price=parseFloat(e[1]),this.price<=this.sale_price&&(this.sale_price=0)):isNaN(parseFloat(e))||(this.price=parseFloat(e)),this.setPrice=function(e){return this.price=e,this},this.setSalePrice=function(e){return this.sale_price=e,this},this.format=function(){return"string"==typeof this.price&&(this.price=e),""===this.price?"Included":this.sale_price>0?'<span class="old-price">'+rx.price.format(parseFloat(this.price))+'</span>&nbsp;<span class="new-price">'+rx.price.format(parseFloat(this.sale_price))+"</span>":void 0!==this.price?rx.price.format(parseFloat(this.price)):this.value},this};Rx.prototype.resultElement={set:function(e,r,t){jQuery("#c_"+e).html(this.formatLineItem(r,t))},value:function(e){jQuery("#c_"+e).html()},getTitle:function(e){console.log(e);var r={diamond:"Diamond Anti-Glare Coating",blue_diamond:"Blue Diamond Anti-Glare Coating",diamond_warranty:"Lens package warranty",easy_clean:"Easy Clean Lenses",uv:"U.V Protection",scratch:"Scratch Protection",impact_resistant:"Impact Resistant Lenses",rush:"Next Day Rush Service"};return rx.label(e,r)},formatLineItem:function(e,r){var t="";return e.match("^Clear")&&(jQuery("#include").addClass("brand-icon clear-icon"),t="brand-icon clear-icon"),e.match("^Transitions")&&(jQuery("#include").removeClass("brand-icon blue-armor-icon"),jQuery("#include").removeClass("brand-icon clear-icon"),t="brand-icon transition-icon"),e.match("^Blue ")&&(jQuery("#include").removeClass("brand-icon clear-icon"),jQuery("#include").addClass("brand-icon blue-armor-icon")),e.match("^Polarized")&&(jQuery("#include").removeClass("brand-icon clear-icon"),jQuery("#include").removeClass("brand-icon blue-armor-icon"),t="brand-icon polarized-icon"),isNaN(parseFloat(r))||(r=new Price(r)),"ok"===jQuery("#rx_package").val()&&r instanceof Price&&!r.price?(jQuery("#include").html('<p class="'+t+'"><span class="include-span">Included Premium Features:</span></p>'),jQuery(".wrap-free-packages").show(),'<li class="rx-package-free" style="float:left;">'+e+"</li><br>"):'<li style="float:left;">'+e+':</li><li style="float:right;">'+r.format()+'</li><li style="clear:both;"></li>'}},Rx.prototype.sourceElement={rx_form:".rx-form-container",get:function(e){return jQuery("#l"+e).val()},insertValue:function(e,r){var t=this,a=function(){var a=jQuery.Event("rx_source_change");return a.element_name=e,a.element_value=r,function(){jQuery(t.rx_form).trigger(a)}}()();jQuery("#l"+e).off("change",a).on("change",a).val(r)}},Rx.prototype.usage={checked:function(){return""!=rx.get("usage")&&rx.get("usage")},set:function(e){rx.purpose.set(""),rx.set("usage",e),"landing_progressive"!==rx.sourcePage.get()&&rx.navigation.showNavControl(1)},getPtypeValue:function(e){var r="";return e!==this.labels("singleVisionReading")&&e!==this.labels("singleVisionDistance")||(r=this.labels("singleVision")),e===this.labels("bifocal")&&(r=this.labels("bifocal")),e===this.labels("progressive")&&(r=this.labels("progressive")),0!=rx.purpose.checked&&(r+=" "+rx.purpose),0!=rx.distance.checked&&(r+=" "+rx.distance),r},step_init:function(e){e.on("click",".selector.prescription_type-selector",function(e){var r=jQuery(this).data("usage");rx.usage.set(r),e.stopPropagation()}),e.on("rx_source_change",function(e){var r=e.element_name,t=e.element_value;if("usage"===r)if(t===rx.usage.labels("bifocal")||t===rx.usage.labels("progressive")){rx.fee.hideEnhanceRxAccuracy(),jQuery("#enhance_rx_accuracy").hide(),"Your Frames"==jQuery("#order_ftype").text()?(jQuery("#div_rush_check_label span").text("4 days, Two-way rush service. "),jQuery("#your_frame_rush_message").text("Replacement Rush Service, includes two-way UPS Next Day Air shipping and faster processing. Get your new lenses in 4 days.")):jQuery("#div_rush_check_label span").text("3 Days Rush Service ");var a=rx_params.rx_i_popup_3_days_rush_service;jQuery(".IR_rush").html(a),jQuery("#3_days_rush_message").show()}else jQuery("#enhance_rx_accuracy").show(),"Your Frames"==jQuery("#order_ftype").text()?(jQuery("#div_rush_check_label span").text("2 days,Two-way rush service. "),jQuery("#your_frame_rush_message").text("Replacement Rush Service, includes two-way UPS Next Day Air shipping and faster processing. Get your new lenses in 2 days.")):jQuery("#div_rush_check_label span").text("Next Day Rush Service "),jQuery("#div_rush_check_label span").prepend('<img src="/content/plugins/rx/assets/image/ic-delivery.svg" alt="" class="rush-logo-order">'),a=rx_params.rx_i_popup_next_day_rush_service,jQuery(".IR_rush").html(a),jQuery("#3_days_rush_message").hide()}),jQuery(".yotpo.yotpo-main-widget").hide(),jQuery(".secure-icons-wrap").addClass("icons-RX");var r=localStorage.getItem("rx_data")?JSON.parse(localStorage.getItem("rx_data")):{};if(void 0!==r.usage&&void 0!==r.usage.type){var t=r.usage.type;setTimeout(function(){jQuery('.selector.prescription_type-selector[data-usage="'+t+'"] .selector_check').click()},0)}},labels:function(e){var r={singleVisionReading:"Single Vision Reading",singleVisionDistance:"Single Vision Distance",singleVision:"Single Vision",bifocal:"Bifocal",progressive:"Progressive"};return rx.label(e,r)}},Rx.prototype.purpose={checked:function(){return""!==rx.get("purpose")&&rx.get("purpose")},set:function(e){return rx.distance.set(""),rx.premium.set(""),rx.set("purpose",e),""!==e&&void 0!==e?(rx.navigation.showNavControl(150),rx.fee.showType("Progressive"),rx.price.set("purpose",0),rx.get("purpose")):(jQuery("#step150").find(".option_selected").removeClass("option_selected"),!1)},labels:function(e){var r={driving:"driving",general:"general",office:"office",sports:"sports"};return rx.label(e,r)},toString:function(){var e=rx.purpose.checked();if(0!=e){switch(e){case"general":e="General Use";break;case"sports":e="Active";break;default:e=e.charAt(0).toUpperCase()+e.slice(1)}return e}return""}},Rx.prototype.distance={checked:function(){return""!=rx.get("distance")&&rx.get("distance")},set:function(e){return rx.set("distance",e),""!=e&&void 0!==e?(rx.price.set("distance",0),rx.fee.showType("Progressive"),rx.get("distance")):(jQuery("#step170").find(".option_selected").removeClass("option_selected"),!1)},labels:function(e){var r={"4ft":"4gt","6_5f":"6_5ft","13f":"13ft","19f":"19ft"};return rx.label(e,r)},toString:function(){var e=rx.distance.checked();return 0!=e?"up to "+(e=e.replace("_",".")):""}},Rx.prototype.prescription={step_init:function(){var e=localStorage.getItem("rx_data")?JSON.parse(localStorage.getItem("rx_data")):{};if(void 0!==e.prescription){var r=e.prescription;r.chk_pd_2&&rx.prescription.set("chk_pd_2"),r.prism&&rx.prescription.set("prism");for(var t in r)r.hasOwnProperty(t)&&rx.prescription.set(t,r[t])}},set:function(){if(1===arguments.length){var e=arguments[0];jQuery("#"+e).click()}else{e=arguments[0];var r=arguments[1];jQuery("#"+e).val(r)}},get:function(){var e=arguments[0],r=arguments[1],t=arguments[2];void 0===t&&(t=!0),t=!!t;var a=jQuery("#"+e+"_"+r).val();return t?parseFloat(a):a},checkSphereSigns:function(){var e="Please Note! Most prescription have either (-) or (+) value for both eyes. Would you like to change that? Choose [Cancel] to stay on this screen and change values. Choose[OK] to continue the process.";return this.get("od","sphere")<0&&this.get("os","sphere")>0&&!confirm(e)?(jQuery("#os_sphere").focus(),!1):!(this.get("od","sphere")>0&&this.get("os","sphere")<0&&!confirm(e))||(jQuery("#os_sphere").focus(),!1)},strength:function(){var e=0;return rx.package.isPrismInUse()&&(e=Math.max(Math.abs(this.get("od","vp")),Math.abs(this.get("od","hp")),Math.abs(this.get("os","vp")),Math.abs(this.get("os","hp")))),Math.max(Math.abs(this.get("od","sphere"))+Math.abs(this.get("od","cylinder")),Math.abs(this.get("os","sphere"))+Math.abs(this.get("os","cylinder")))+e},validate:function(){jQuery("#coating_treatment").val(),jQuery("#tint_options").val(),jQuery("#comments").val();var e=[];if(1===rx.get("impact")&&this.strength()>6&&!confirm("Please note, if this prescription belongs to a person 18 year and older, we recommend unchecking the impact resistant option. Impact resistant lenses at this prescription strength tend to be thicker when compared to recommended high index lenses. Do you want to continue?"))return!1;if(0===this.get("pd","1")&&e.push("Prescription data must have PD value."),rx.get("usage")!==this.labels("bifocal")&&rx.get("usage")!==this.labels("progressive")||(0===this.get("od","add")&&0===this.get("os","add")&&e.push("Prescription data must have OD ADD and OS ADD value"),0===this.get("od","add")&&e.push("Prescription data must have OD ADD value"),0===this.get("os","add")&&e.push("Prescription data must have OS ADD value")),0!==this.get("od","cylinder")&&0===this.get("od","axis")&&e.push("Prescription data must have an Axis value if Cylinder value is different then 0.00"),0!==this.get("os","cylinder")&&0===this.get("os","axis")&&e.push("Prescription data must have an Axis value if Cylinder value is different then 0.00"),"none"===this.get("pd","1",!1)&&e.push("PD cannot be empty."),"none"!==this.get("pd","1",!1)&&jQuery("#chk_pd_2").is(":checked")&&0===this.get("pd","2")&&e.push("Prescription data must have PD value (Left Eye)"),rx.package.isPrismInUse()&&(0===this.get("od","vp")&&0===this.get("os","vp")&&0===this.get("od","hp")&&0===this.get("os","hp")&&e.push("Prism option is selected, but no prism values are specified."),(0!==this.get("od","vp")&&"n/a"===this.get("od_vp","basedirection",!1)||0===this.get("od","vp")&&"n/a"!==this.get("od_vp","basedirection",!1)||0!==this.get("os","vp")&&"n/a"===this.get("os_vp","basedirection",!1)||0===this.get("os","vp")&&"n/a"!==this.get("os_vp","basedirection",!1)||0!==this.get("od","hp")&&"n/a"===this.get("od_hp","basedirection",!1)||0===this.get("od","hp")&&"n/a"!==this.get("od_hp","basedirection",!1)||0!==this.get("os","hp")&&"n/a"===this.get("os_hp","basedirection",!1)||0===this.get("os","hp")&&"n/a"!==this.get("os_hp","basedirection",!1))&&e.push("OD / OS Prism values are not complete. Both Prism Value and Direction are required.")),e.map(function(r,t){e[t]="<li>"+r+"</li>"}),0!==e.length)throw new Error("<ul>"+e.join("")+"</ul>");return!0},segOC_toggle:function(){rx.get("usage")===rx.usage.labels("progressive")?jQuery("#SegOC").slideDown():jQuery("#SegOC").slideUp(),this.segOC_sub_toggle()},segOC_sub_toggle:function(){jQuery("#chk_segoc").is(":checked")?jQuery("#substep_segoc").slideDown():jQuery("#substep_segoc").slideUp()},anotherPD:function(){jQuery("#chk_pd_2").is(":checked")?(jQuery("#pd_spare").html(jQuery("#pd_1").html()),jQuery("#pd_1").html(jQuery("#pd_2").html()),jQuery("#div_pd_2").show()):(jQuery("#div_pd_2").hide(),jQuery("#pd_1").html(jQuery("#pd_spare").html()))},showPrism:function(){jQuery("#prism").is(":checked")?(jQuery("#container_prism").show(),rx.show("prism","Prism",new Price(rx_params.fees.prism_fee)),rx.price.set("prism",parseFloat(rx_params.fees.prism_fee))):(jQuery("#container_prism").hide(),rx.reset("prism"),rx.price.set("prism",0)),rx.fee.hideCoating(),rx.fee.hideMaterial()},parseRx:function(){var e={};return"fashion"===rx.prescription.get("d","mode",!1)&&(e.fashion="Fashion Lenses"),e.od_sphere=rx.prescription.get("od","sphere",!1),e.od_cylinder=rx.prescription.get("od","cylinder",!1),e.od_axis=rx.prescription.get("od","axis",!1),e.od_add=rx.prescription.get("od","add",!1),e.os_sphere=rx.prescription.get("os","sphere",!1),e.os_cylinder=rx.prescription.get("os","cylinder",!1),e.os_axis=rx.prescription.get("os","axis",!1),e.os_add=rx.prescription.get("os","add",!1),e.checked_segoc=!!jQuery("#chk_segoc").is(":checked"),e.od_segoc=rx.prescription.get("od","segoc",!1),e.os_segoc=rx.prescription.get("os","segoc",!1),e.pd_1=rx.prescription.get("pd","1",!1),e.chk_pd_2=!!jQuery("#chk_pd_2").is(":checked"),e.pd_2=rx.prescription.get("pd","2",!1),e.prism=!!rx.package.isPrismInUse(),e.od_vp=rx.prescription.get("od","vp",!1),e.od_vp_basedirection=rx.prescription.get("od","vp_basedirection",!1),e.od_hp=rx.prescription.get("od","hp",!1),e.od_hp_basedirection=rx.prescription.get("od","hp_basedirection",!1),e.os_vp=rx.prescription.get("os","vp",!1),e.os_vp_basedirection=rx.prescription.get("os","vp_basedirection",!1),e.os_hp=rx.prescription.get("os","hp",!1),e.os_hp_basedirection=rx.prescription.get("os","hp_basedirection",!1),e},getPdHtml:function(e){e||(e=this.parseRx());var r="";return e.chk_pd_2||(r+='<div class="info-title-pd"><span class="info-cart-title">PD: </span><span class="info-cart-value">'+e.pd_1+"</span></div>"),r},getRightEyeHtml:function(e){e||(e=this.parseRx());var r="";return r+='<div class="right-eye-od"><span class="info-title">Right Eye (OD)</span>',r+='<div class="info-cart">',r=r+'<div data-name="od_sphere"><span class="info-cart-title">Sphere:</span><span class="info-cart-value">'+e.od_sphere+"</span></div>",r=r+'<div data-name="od_cylinder"><span class="info-cart-title">Cylinder:</span><span class="info-cart-value">'+e.od_cylinder+"</span></div>",r=r+'<div data-name="od_axis"><span class="info-cart-title">Axis:</span><span class="info-cart-value">'+e.od_axis+"</span></div>",r=r+'<div data-name="od_add"><span class="info-cart-title">Add:</span><span class="info-cart-value">'+e.od_add+"</span></div>",e.chk_pd_2&&(r+='<div class="info-title-pd1"><span class="info-cart-title">PD: </span><span class="info-cart-value">'+e.pd_1+"</span></div>"),e.checked_segoc&&0!=e.od_segoc&&(r+='<div class="info-title-segoc_1"><span class="info-cart-title">Seg/OC: </span><span class="info-cart-value">'+e.od_segoc+"</span></div>"),e.prism&&(r=(r=(r=(r=(r+='<span class="rx-product-header-name">Prism</span>')+'<div data-name="od_prism"><span class="info-cart-title">Vertical:</span><span class="info-cart-value">'+e.od_vp+"</span></div>")+'<div data-name="od_vertical_base_direction"><span class="info-cart-title">Base Direction:</span><span class="info-cart-value">'+e.od_vp_basedirection+"</span></div>")+'<div data-name="od_horizontal_prism"><span class="info-cart-title">Horizontal:</span><span class="info-cart-value">'+e.od_hp+"</span></div>")+'<div data-name="od_horizontal_base_dDirection"><span class="info-cart-title">Base Direction:</span><span class="info-cart-value">'+e.od_hp_basedirection+"</span></div>"),r+="</div>",r+="</div>\x3c!--info-cart--\x3e"},getLeftEyeHtml:function(e){e||(e=this.parseRx());var r="";return r+='<div class="left-eye-os"><span class="info-title">Left Eye (OS)</span>',r+='<div class="info-cart">',r=r+'<div data-name="os_sphere"><span class="info-cart-title">Sphere:</span><span class="info-cart-value">'+e.os_sphere+"</span></div>",r=r+'<div data-name="os_cylinder"><span class="info-cart-title">Cylinder:</span><span class="info-cart-value">'+e.os_cylinder+"</span></div>",r=r+'<div data-name="os_axis"><span class="info-cart-title">Axis:</span><span class="info-cart-value">'+e.os_axis+"</span></div>",r=r+'<div data-name="os_add"><span class="info-cart-title">Add:</span><span class="info-cart-value">'+e.os_add+"</span></div>",e.chk_pd_2&&(r+='<div class="info-title-pd2"><span class="info-cart-title">PD: </span><span class="info-cart-value">'+e.pd_2+"</span></div>"),e.checked_segoc&&!1!==e.os_segoc&&(r+='<div class="info-title-segoc_2"><span class="info-cart-title">Seg/OC: </span><span class="info-cart-value">'+e.os_segoc+"</span></div>"),e.prism&&(r=(r=(r=(r=(r+='<span class="rx-product-header-name">Prism</span>')+'<div data-name="os_prism"><span class="info-cart-title">Vertical:</span><span class="info-cart-value">'+e.os_vp+"</span></div>")+'<div data-name="os_vertical_base_direction"><span class="info-cart-title">Base Direction:</span><span class="info-cart-value">'+e.os_vp_basedirection+"</span></div>")+'<div data-name="os_od_horizontal_prism"><span class="info-cart-title">Horizontal:</span><span class="info-cart-value">'+e.os_hp+"</span></div>")+'<div data-name="os_horizontal_base_dDirection"><span class="info-cart-title">Base Direction:</span><span class="info-cart-value">'+e.os_hp_basedirection+"</span></div>"),r+="</div>",r+="</div>"},getRX:function(){var e=rx.prescription.parseRx(),r="";return"fashion"===rx.prescription.get("d","mode",!1)?r='<span class="info-title">Fashion Lenses</span>':(r+=rx.prescription.getPdHtml(e),r+=rx.prescription.getRightEyeHtml(e),r+=rx.prescription.getLeftEyeHtml(e))},parseLenses:function(){var e={};return e.ltype=rx.prescription.parseLensesPtype(),e.lpurpose=rx.purpose,e.ldistance=rx.distance,e.lpremium=rx.premium,e.ltint=rx.get("tint"),e.ltint_option=rx.get("tint_option"),e.lpackage=rx.get("package"),e.lcoating=rx.get("coating"),e.enhanceAccuracy=!!rx.get("easyclean"),e.lrush=!!rx.get("rush"),e.diamond=!!rx.get("diamond"),e},getLenses:function(){var e=rx.prescription.parseLenses(),r="";"ok"===jQuery("#rx_package").val()?r+='<div class="info-title" style="font-weight: 400;font-size: 1.2em;">Recommended Package</div>':r+='<div class="info-title" style="font-weight: 400;font-size: 1.2em;">Customized By customer</div>',"groupon"===e.ltint_option?(r+='<div class="info-title">Single Vision: Impact Resistant</div>',r+='<div class="info-title">PC Advanced</div>',r+='<div class="info-title">Premium Anti-Glare</div>'):(r=(r=(r=(r=(r=r+'<div class="info-title">'+e.ltype+"</div>")+'<div class="info-title">'+e.lpurpose+"</div>")+'<div class="info-title">'+e.ldistance+"</div>")+'<div class="info-title">'+e.lpremium+"</div>")+'<div class="info-title">'+e.ltint+" "+e.ltint_option+"</div>",void 0!==rx.diamond.titleDiamond()&&(r=(r=r+'<div class="info-title">'+rx.diamond.titleDiamond()+"</div>")+'<div class="info-title">'+rx.resultElement.getTitle("diamond_warranty")+" - "+new Warranty(2,"year").format()+"</div>"),r=r+'<div class="info-title">'+e.lpackage+"</div>");var t=e.lcoating;if(e.enhanceAccuracy&&(t+=this.labels("easyClean")),r=r+'<div class="info-title">'+t+"</div>",e.lrush){a="NEXT DAY RUSH SERVICE";if("Your Frames"==jQuery("#order_ftype").text())var a="TWO-WAY RUSH SERVICE";r=r+'<div class="info-title">'+a+"</div>"}return r},parseLensesPtype:function(){var e=rx.get("usage");return e!==this.labels("near")&&e!==this.labels("distance")||(e=this.labels("singleVision")),1===rx.get("freeform")&&(e+=this.labels("freeForm")),1===rx.get("impact")&&(e+=this.labels("impactResistant")),e},labels:function(e){var r={near:"Near",easyClean:"; Easy Clean",singleVision:"Single Vision",freeForm:"; Free Form",impactResistant:": Impact Resistant",distance:"Distance",bifocal:"Bifocal",progressive:"Progressive"};return rx.label(e,r)}},Rx.prototype.premium={checked:function(){return""!=rx.get("premium")&&rx.get("premium")},set:function(e){if(""!==e&&void 0!==e){var r=e.split("#"),t=r[0],a=r[1];return r.length>2&&(a=[a,r[2]]),rx.set("premium",t),rx.show("premium",this.toString(),new Price(a)),rx.price.set("premium",a),!0}return rx.set("premium",""),jQuery("#step250").find(".option_selected").removeClass("option_selected"),rx.fee.hidePremium(),!1},labels:function(e){var r={premium:"Premium",premium_plus:"Premium plus",custom:"-- to be defined 3 --"};return rx.label(e,r)},toString:function(){var e=rx.premium.checked();return 0!=e?e.charAt(0).toUpperCase()+e.slice(1):""}},Rx.prototype.lensColor={changeTintColor:function(e,r){var t=rx.get("tint");rx.set("tint_option",e),rx.fee.showTint(t+" "+e,r),"custom"===r&&rx.package.init(),"Gray Xtra Active"===e&&"package"===r?(rx.show("tint","Transitions ® Xtra Active",new Price(rx_params.fees.xtra_active_color_fee)),rx.price.set("tint",parseFloat(rx_params.fees.xtra_active_color_fee))):"Gray Xtra Active"===e&&"custom"===r&&(rx.show("tint","Transitions ® Xtra Active",new Price(rx_params.fees.xtra_active_color_fee+rx_params.fees.tint_lr_t[rx_params.opt_ind])),rx.price.set("tint",parseFloat(rx_params.fees.xtra_active_color_fee+rx_params.fees.tint_lr_t[rx_params.opt_ind])))},changeValue:function(e){jQuery("#step4").hide(),jQuery("#ltint").val(e),rx.set("tint_option",this.labels("noTint")),e===this.labels("clearLens")&&(rx.reset("tint"),rx.zero("tint_price"),jQuery("#tint_tr").hide(),jQuery("#container_lens_tint_color").hide(),jQuery("#hr_tint_color").hide(),rx.package.init()),e!==this.labels("lightResponsive")&&rx.fee.showTint(e),jQuery(".lens_tint_color").hide(),"Transitions®"===e&&(jQuery(".rx-extra-section_div_rx_ps2").show(),jQuery(".rx-extra-section_div_rx_ps21").show(),jQuery(".rx-extra-section_div_rx_ps40").show())},setColor:function(e){var r=e.target,t=jQuery(r).data("colorName"),a=rx.get("tint");rx.set("tint_option",t),rx.show("tint",a+" "+t);var s=jQuery(r).data("group");jQuery("div[data-group='"+s+"']").removeClass("border_tint_color").addClass("selector_option");var i=jQuery(r).data("id");jQuery("div[data-id='"+i+"']").removeClass("selector_option").addClass("border_tint_color")},validate:function(){return""!==rx.get("tint")||(rx.alert("Please select lens color option"),!1)},validateOptions:function(){var e=rx.get("tint"),r=rx.get("tint_option");return""===e||e===this.labels("clearLens")||r!==this.labels("noTint")||(rx.alert("Please select lens color option"),!1)},reset:function(){jQuery("#container_lens_tint_color").hide().html(""),jQuery("#hr_tint_color").hide(),jQuery("div[data-group='check_rdo_tint']").removeClass("option_selected").addClass("selector_option").html(""),rx.fee.hideTint()},setLR:function(e,r,t){rx.lensColor.changeValue(e),rx.lensColor.changeTintColor(r,t),jQuery(".rx-extra-section_div_rdo_t_lres").show()},labels:function(e){var r={noTint:"No Tint",clearLens:"Clear Lens",lightResponsive:"Light Responsive"};return rx.label(e,r)}},Rx.prototype.lensPackage={setMaterial:function(e){if(rx.fee.hideMaterial(),""===e)return rx.fee.hideMaterial(),!1;var r=e.split("#"),t=parseFloat(r[1]).toFixed(2),a=r[0];rx.set("package",a),rx.price.set("material",t),rx.show("material",a,new Price(t)),rx.set("package",a)}},Rx.prototype.coatingOptions={setCoating:function(e){if(""===e)return rx.fee.hideCoating(),!1;var r=e.split("#"),t=r[0],a=r[1];rx.set("coating",t),rx.price.set("coating",a),jQuery(".wrap-free-packages").show().addClass("extras-on"),rx.show("coating",t,new Price(a))},easyClean:function(){0==rx.get("easyclean")?(rx.set("easyclean",1),jQuery(".wrap-free-packages").show().addClass("extras-on")):(rx.fee.hideEasyClean(),rx.set("easyclean",0))}},Rx.prototype.previewOrder={rushClicked:function(){""===rx.get("rush")?rx.set("rush",1):(rx.fee.hideRush(),rx.set("rush",""))},reviewOrder:function(){if("fashion"===rx.prescription.get("d","mode",!1)&&(!1===rx.lensColor.validate()||!1===rx.lensColor.validateOptions()))return!1;rx.fashion.reviewOrderHide(),"fashion"!=rx.prescription.get("d","mode",!1)?(rx.step.cShowStep6(),""!=rx.prescription.get("rx","package",!1)&&jQuery(".first_button:visible").attr("onClick","rx.navigation.reset(6)")):rx.fashion.reviewOrderHideShowNot();var e=rx.prescription.parseRx();jQuery("#rx_placeholder").html(rx.prescription.getPdHtml(e)),jQuery(".right-eye-review").html(rx.prescription.getRightEyeHtml(e)),jQuery(".left-eye-review").html(rx.prescription.getLeftEyeHtml(e)),rx.step.showStep6()},showOrderSummary:function(){jQuery("#nav-progress").show(),jQuery("#package_image").show(),jQuery("#package_title").show(),jQuery("#progress-step-name").show(),jQuery("#package_data_header").html("<B>YOUR EYEGLASSES</B>"),jQuery(".coupon_block").remove()}},Rx.prototype.package={hideRdoMaterial:function(){jQuery("div[data-group='rdo_material']").hide(),jQuery("div[data-group='rdo_material_tile']").hide()},getVal:function(){var e=rx.get("usage"),r=rx.get("tint");r===this.labels("transitions_@")&&(r=rx.get("tint_option").indexOf("Xtra")>0?this.labels("transitionsExtraDark"):this.labels("transitions"));var t=rx.prescription.get("od","sphere",!1),a=rx.prescription.get("od","cylinder",!1),s=rx.prescription.get("os","sphere",!1),i=rx.prescription.get("os","cylinder",!1),o=rx.get("impact"),n=rx.get("premium"),c=rx.get("purpose"),p=0;""!=rx.get("premium")&&(p+=rx.price.get("premium"));return e===this.labels("near")&&(e=this.labels("readingFocal")),{rxtype:e,lens:r,od_sphere:t,od_cylinder:a,os_sphere:s,os_cylinder:i,impact:o,premium:n,pricetoremove:p,trackingdis:0,rx_progressive_type:c,strength:rx.prescription.strength()}},init:function(e){var r="";if(2==arguments.length)var t=arguments[1];3==arguments.length&&(t=arguments[1],r=arguments[2]),rx.set("packagetype",e),this.hideRdoMaterial();var a=this.getVal(),s=a.rxtype,i=a.lens,o=a.od_sphere,n=a.od_cylinder,c=a.os_sphere,p=a.os_cylinder,l=a.impact,u=a.trackingdis,d=a.premium,h=a.pricetoremove,_=a.rx_progressive_type;if("preset"===e)var g="rx_get_preset_packages",m="#step7";else g="rx_get_packages",m="#step4";window.loader.start(),jQuery.ajax({url:rx_params.url,type:"GET",dataType:"text",data:{action:g,rxtype:s,lens:i,od_sphere:o,od_cylinder:n,os_sphere:c,os_cylinder:p,impact_resistant:l,tracking:u,material:r,premium:d,pricetoremove:h,rx_progressive_type:_,strength:a.strength},success:function(e){jQuery(m).html(e),jQuery(m).foundation()},complete:function(e){"function"==typeof t&&t(),window.loader.stop()}})},reset:function(){jQuery("div[data-group='check_rdo_material']").removeClass("option_selected").addClass("selector_option").html(""),rx.fee.hideMaterial()},clear:function(){rx.reset("easy_clean"),rx.reset("uv"),rx.reset("scratch"),rx.fee.hideCoating(),rx.fee.hideEasyClean(),rx.fee.hideMaterial(),rx.fee.hideTint()},customizeClear:function(){jQuery("#include").html(""),jQuery(".wrap-free-packages").hide(),jQuery("#rx_package").val(""),jQuery("#step7").hide(),jQuery("#rx_right_packages").hide(),jQuery(".rx-packages").hide(),jQuery("#rx_right").show(),jQuery("#step4").hide(),jQuery("#nb_step7").hide(),jQuery("#package_step6").hide(),rx.diamond.hideDiamond()},customize:function(){this.customizeClear(),this.clear(),rx.navigation.reset(3)},initPackage:function(e){var r=jQuery(e.target).closest(".selector"),t=r.data("l2id"),a=(r.data("rxtype"),r.data("material")),s=r.data("price"),i=r.data("sale_price"),o=r.data("tint"),n=r.data("coating"),c=(r.data("easy_clean"),r.data("uv_protection"),r.data("scratch_protection"),a);rx.package.clear(),jQuery("#rx_package").val("ok"),jQuery("#ltint").val(o);var p=new Price(s);i&&p.setSalePrice(i),rx.show("material",c,p),s=i?[s,i]:s,rx.price.set("material",s),rx.show("coating",n),rx.show("tint",o),rx.show("uv"),rx.show("scratch"),rx.show("easy_clean");var l=parseFloat(jQuery("#frame_subtotal").val());if(rx.price.set("total",l),rx.set("package",c),o.substr(0,5)!==rx.package.labels("clear")&&o.substr(0,5)!==rx.package.labels("blue")){var u=rx.get("tint"),d=rx.get("tint_option");d===rx.package.labels("noTint")&&(d=rx.package.labels("brown"),rx.set("tint_option",d)),rx.show("tint",u+" "+d),jQuery(".l2_select").hide(),jQuery(t).show()}else jQuery(".l2_select").hide()},reviewPreset:function(){if(""===rx.get("package"))return rx.alert("Please Select A Lens Package"),!1;jQuery("#step7").hide(),jQuery("#nb_step7").hide(),rx.previewOrder.reviewOrder("preset")},isPrismInUse:function(){return jQuery("#prism").is(":checked")?1:0},labels:function(e){var r={"transitions_@":"Transitions®",brown:"Brown",clear:"Clear",blue:"Blue ",near:"Near",readingFocal:"Reading / Focal",transitions:"Transitions",transitionsExtraDark:"Transitions Extra Dark",noTint:"No Tint"};return rx.label(e,r)},getStrength:function(){var e=this.getVal();return Math.max(Math.abs(e.od_sphere)+Math.abs(e.od_cylinder),Math.abs(e.os_sphere)+Math.abs(e.os_cylinder))},isSingleVision:function(){var e=this.getVal().rxtype;return"Single Vision Reading"===e||"Single Vision Distance"===e},getAllData:function(){var e=rx.prescription.parseLenses(),r=(rx.prescription.parseRx(),e.ltype);return{product_id:jQuery("input[name='add-to-cart']").val(),type:r,lenses:e,rush:!!e.lrush,rush_price:rx.price.get("rush"),lens_price:rx.price.get("lens"),total_price:jQuery("#total_price").val(),date:(new Date).toISOString(),prescription:rx.prescription.parseRx()}}},Rx.prototype.price={rx_form:".rx-form-container",get:function(e){return parseFloat(jQuery("#"+e+"_price").val())},getSave:function(e){var r=jQuery("#"+e+"_price").data("sale_price"),t=jQuery("#"+e+"_price").data("price");return parseFloat(r>0?t-r:0)},set:function(e,r){$element=jQuery("#"+e+"_price");var t=jQuery.Event("rx_price_set");t.element=e,t.jqueryElement=$element,t.old_price=$element.data("price"),t.old_sale_price=$element.data("sale_price"),Array.isArray(r)?($element.val(parseFloat(r[1]).toFixed(2)),$element.data("price",parseFloat(r[0]).toFixed(2)),$element.data("sale_price",parseFloat(r[1]).toFixed(2))):($element.val(parseFloat(r).toFixed(2)),$element.data("price",parseFloat(r).toFixed(2)),$element.data("sale_price",0)),t.new_price=$element.data("price"),t.new_sale_price=$element.data("sale_price"),jQuery(this.rx_form).trigger(t)},getFactor:function(e){return parseFloat(jQuery("#"+e+"factor").val())},getDiscount:function(e,r,t){var a=0,s=0;this.getFactor("p")>0&&this.getFactor("p")<1?(a=e*(1-this.getFactor("p")),e*=this.getFactor("p")):a=this.getSave("type")+this.getSave("premium")+this.getSave("material")+this.getSave("coating")+this.getSave("tint")+this.getSave("easy_clean")+this.getSave("impact")+this.getSave("diamond")+this.getSave("enhance_rx_accuracy");var i=this.getSave("rush");return this.getFactor("f")>0&&this.getFactor("f")<1?s=r/this.getFactor("f")*(1-this.getFactor("f")):rx_cart_params.frame_regular_price&&(s=parseFloat(rx_cart_params.frame_regular_price)-r),{lens_subtotal_final:e,subtotal:e+r+t,discount:a+s+i}},calculate:function(){var e=parseFloat(jQuery("#frame_subtotal").val()),r=this.get("prism")+this.get("type")+this.get("premium")+this.get("material")+this.get("coating")+this.get("tint")+this.get("easy_clean")+this.get("impact")+this.get("diamond")+this.get("enhance_rx_accuracy"),t=this.get("rush"),a=this.getDiscount(r,e,t);r=a.lens_subtotal_final;var s=a.subtotal,i=a.discount;return jQuery("#price_subtotal").html("$"+s.toFixed(2).toString().replace(",",".")),i>0?(jQuery("#c_discount").show(),jQuery("#price_discount").html("<span class='new-price'>$"+i.toFixed(2).toString().replace(",",".")+"</span>")):(jQuery("#c_discount").hide(),jQuery("#price_discount").html("")),this.set("lens",r),jQuery("#c_lens_subtotal").html("$"+r.toFixed(2).toString().replace(",",".")),jQuery("#total_price").val(s),jQuery(this.rx_form).trigger("rx_calculate"),s},format:function(e){if(0===e)return"Free";var r="$"+e.toFixed(2).toString().replace(",",".");return jQuery("#pfactor").val()>0&&jQuery("#pfactor").val()<1?"$"+(e*jQuery("#pfactor").val()).toFixed(2).toString().replace(",","."):r}},Rx.prototype.show=function(){var e=arguments[0];if(2===arguments.length){if(void 0===arguments[1])var r=new Price(0);var t=arguments[1]}else 1===arguments.length?(t=this.resultElement.getTitle(e),r=arguments[2]):(t=arguments[1],r=arguments[2]);void 0===r&&(r=new Price(0)),!1===arguments[1]&&(t=this.resultElement.getTitle(e)),this.resultElement.set(e,t,r)},Rx.prototype.reset=function(e){jQuery("#c_"+e).html("")},Rx.prototype.zero=function(e){jQuery("#"+e).val(0)},Rx.prototype.get=function(e){return this.sourceElement.get(e)},Rx.prototype.set=function(e,r){this.sourceElement.insertValue(e,r)},Rx.prototype.step={rx_form:".rx-form-container",set:function(e){var r=jQuery.Event("rx_step_set");r.step_number=e,jQuery(this.rx_form).trigger(r)},showStep6:function(){jQuery("#step6").show(),jQuery(".rx-form-container").trigger("rx_step_6_showed"),jQuery("#lpackage").val().match("^Trivex")&&"Blue Armor &reg;"===rx.get("tint")?jQuery("#diamond").hide():(jQuery("#diamond").show(),"Blue Armor &reg;"===rx.get("tint")?jQuery("#div_diamond_check_label span").text("Upgrade to Blue Diamond Anti-Glare Coating and receive two years warranty on your lenses"):jQuery("#div_diamond_check_label span").text("Upgrade to Diamond Anti-Glare Coating and receive two years warranty on your lenses"),jQuery("#div_diamond_check_label span").prepend('<img src="/content/plugins/rx/assets/image/diamond-coatings-ito-coatings.png" alt="" class="diamond-logo-order">'))},cShowStep6:function(){jQuery("#step5").hide(),jQuery("#nb_step5").hide(),jQuery(".rx-add-lens-package-top").hide(),jQuery("#rx_right_packages").hide(),jQuery("#package_step6").hide(),jQuery("#step6").show(),jQuery("#rx_right").show(),rx.navigation.showNavControl(6),jQuery(".rush_placeholder").show()}},Rx.prototype.sourcePage={set:function(e){return""===e||void 0===e?(rx.set("sourcePage",""),!1):(rx.set("sourcePage",e),!0)},get:function(e){return rx.get("sourcePage")}},Rx.prototype.fee={getSingleEnhanceRxAccuracy:function(){return parseFloat(20)},getSingleImpactResistant:function(){return parseFloat(rx_params.fees.impact_resistant_fee)},getSingleDiamond:function(){return parseFloat(rx_params.fees.diamond_fee)},getSingleEasyClean:function(){return parseFloat(rx_params.fees.easy_clean_fee)},getSingleRush:function(){var e=parseFloat(jQuery("#frame_subtotal").val());return"Your Frames"==jQuery("#order_ftype").text()?parseFloat(rx_params.fees.your_frame_rush_fee):e>=150?parseFloat(rx_params.fees.rush_service_ge150_fee):parseFloat(rx_params.fees.rush_service_fee)},getSingleTint:function(){switch(rx.get("tint")){case this.labels("clearLens"):var e=parseFloat(0);break;case this.labels("sunLensTint"):e=parseFloat(rx_params.fees.tint_sun_tint[rx_params.opt_ind]);break;case this.labels("photochromic"):e=parseFloat(rx_params.fees.tint_lr_p[rx_params.opt_ind]);break;case this.labels("transitions_@"):e=rx.get("tint_option").indexOf("Xtra")>0?parseFloat(rx_params.fees.tint_lr_xtr_a[rx_params.opt_ind]):parseFloat(rx_params.fees.tint_lr_t[rx_params.opt_ind]);break;case this.labels("polarized"):e=parseFloat(rx_params.fees.tint_polarized[rx_params.opt_ind]);break;default:e=parseFloat(0)}return e},getSingleType:function(e){var r=0;return e===this.labels("singleVisionReading")||e===this.labels("singleVisionDistance")?r=rx_params.fees.usage_reading:"Bifocal"===e?r=rx_params.fees.usage_bifocal:"Progressive"===e&&(r=rx_params.fees.usage_progressive),r},hideEnhanceRxAccuracy:function(){clearCheck("enhance_rx_accuracy"),rx.set("freeform",0),rx.zero("enhance_rx_accuracy_price"),rx.reset("enhance_rx_accuracy")},hideImpactResistant:function(){rx.reset("impact_resistant"),rx.zero("impact_price"),jQuery("#impact_resistant").removeAttr("checked"),rx.set("impact",0)},hideEasyClean:function(){rx.reset("easy_clean"),rx.zero("easy_clean_price")},hideRush:function(){rx.reset("rush"),rx.zero("rush_price")},hideTint:function(){rx.reset("tint"),rx.zero("tint_price"),rx.set("tint",""),rx.set("tint_option","No Tint")},hideMaterial:function(){rx.reset("material"),rx.zero("material_price")},hidePremium:function(){rx.reset("premium"),rx.zero("premium_price"),rx.set("premium","")},hidePurpose:function(){rx.reset("purpose"),rx.zero("purpose_price"),rx.set("purpose","")},hideDistance:function(){rx.reset("distance"),rx.zero("distance_price"),rx.set("distance","")},hideCoating:function(){rx.reset("coating"),rx.zero("coating_price"),rx.set("coating","")},showEnhanceRxAccuracy:function(e){var r=rx.resultElement.formatLineItem(this.labels("enhanceRXAccuracy"),new Price(e));jQuery("#c_enhance_rx_accuracy").html(r)},showImpactResistant:function(){var e=rx.fee.getSingleImpactResistant();rx.price.set("impact",e),rx.show("impact_resistant",!1,new Price(e))},showEasyClean:function(){var e=this.getSingleEasyClean();rx.price.set("easy_clean",e),rx.show("easy_clean",!1,new Price(e))},showRush:function(e){var r=this.getSingleRush();rx.price.set("rush",r),rx.show("rush",!1,new Price(r))},showDiamond:function(e){var r=this.getSingleDiamond();rx.price.set("diamond",r),"Blue Armor &reg;"===rx.get("tint")?rx.show("blue_diamond",!1,new Price(r)):rx.show("diamond",!1,new Price(r)),rx.show("diamond_warranty",rx.resultElement.getTitle("diamond_warranty"),new Warranty(2,"year"))},showTint:function(e,r){if("custom"===r)var t=this.getSingleTint();else t=0;rx.show("tint",e,new Price(t)),rx.price.set("tint",t)},showType:function(e){var r=this.getSingleType(e),t=rx.usage.getPtypeValue(e);rx.price.set("type",r),rx.show("ptype",t,new Price(r))},showPurpose:function(e){},init:function(e){e.on("rx_source_change",function(e){var r=e.element_name,t=e.element_value;if(t)switch(r){case"usage":rx.fee.showType(t);break;case"purpose":break;case"impact":rx.fee.showImpactResistant(t);break;case"rush":rx.fee.showRush(t);break;case"diamond":rx.fee.showDiamond(t);break;case"easyclean":rx.fee.showEasyClean(t);break;case"freeform":rx.fee.showEnhanceRxAccuracy(t)}else r})},labels:function(e){var r={clearLens:"Clear Lens",sunLensTint:"Sun Lens Tint",photochromic:"Photochromic","transitions_@":"Transitions®",polarized:"Polarized",singleVisionReading:"Single Vision Reading",singleVisionDistance:"Single Vision Distance",enhanceRXAccuracy:"Enhance RX Accuracy"};return rx.label(e,r)}},Rx.prototype.impactResistant={change:function(){if(0==rx.get("impact")){var e=rx.fee.getSingleImpactResistant();rx.price.set("impact",e),rx.set("impact",1)}else rx.fee.hideImpactResistant()}},Rx.prototype.diamond={init:function(e){e.on("click",".selector",function(){jQuery("#step7").is(":visible")?(jQuery(".wrapper-diamond").show(),rx.diamond.hideDiamond()):jQuery(".wrapper-diamond").hide()})},change:function(){if(""===rx.get("diamond")){var e=rx.fee.getSingleDiamond();jQuery(".content-diamond").addClass("active-diamond"),jQuery(".title-upgrade i.fa-check ").css("display","inline-block"),rx.price.set("diamond",e),rx.set("diamond",1)}else rx.diamond.hideDiamond()},hideDiamond:function(){jQuery(".content-diamond").removeClass("active-diamond"),jQuery(".title-upgrade i.fa-check ").css("display","none"),rx.zero("diamond_price"),rx.set("diamond",""),rx.reset("diamond"),rx.reset("blue_diamond"),rx.reset("diamond_warranty")},titleDiamond:function(){if(rx.get("diamond")){return"Blue Armor &reg;"===rx.get("tint")?rx.resultElement.getTitle("blue_diamond"):rx.resultElement.getTitle("diamond")}}},Rx.prototype.fashion={reset:function(){jQuery("#step6").slideToggle(),jQuery("#step3").slideToggle(),jQuery("#nb_step6").hide(),jQuery("#nb_step3").show(),jQuery("#package_image").show(),jQuery("#package_title").show(),jQuery("#package_data_header").html("<B>YOUR EYEGLASSES</B>"),jQuery("#progress-step-name").show(),jQuery("#nav-progress").show(),jQuery(".wrap-free-packages").hide()},reviewOrderHide:function(){jQuery("#progress-step-name").hide(),jQuery(".nav-progress").hide(),jQuery("#package_image").hide(),jQuery("#package_title").hide(),jQuery("#package_data_header").html("<B>SELECTED OPTIONS</B>")},reviewOrderHideShowNot:function(){jQuery("#step3").hide(),jQuery("#nb_step3").hide(),jQuery(".rush_placeholder").hide(),jQuery(".description-review-order").hide(),rx.navigation.showNavControl(6)}},Rx.prototype.navigation={rx_form:".rx-form-container",map:{1:"usage",2:"prescription"},set:function(e){rx.navigation.move(e,e+1)},move:function(e,r){var t=r;jQuery("#step"+r).is(":visible")&&(t=e),jQuery("[id^='step']").slideUp(),jQuery("#step"+t).slideDown(),this.setProgress(t),this.showNavControl(t)},showNavControl:function(e){jQuery("[id^='nb_step']").hide();var r="#nb_step";switch(e){case 1:rx.get("usage")===rx.usage.labels("progressive")&&(r="#nb_step1_progressive");break;case 150:rx.get("purpose")===rx.purpose.labels("office")&&(r="#nb_step150_office");break;case 2:"landing_progressive"===rx.sourcePage.get()?r=rx.get("purpose")===rx.purpose.labels("general")?"#nb_step2_landingProgressive_premium":"#nb_step2_landingProgressive":rx.get("usage")===rx.usage.labels("progressive")&&(r=rx.get("purpose")===rx.purpose.labels("general")?"#nb_step2_progressive_premium":rx.get("purpose")===rx.purpose.labels("office")?"#nb_step2_distance":"#nb_step2_progressive");break;case 6:"landing_progressive"===rx.sourcePage.get()&&(r="#nb_step6_landingProgressive");break;case 7:rx.get("purpose")===rx.purpose.labels("general")&&(r="#nb_step7_premium")}"#nb_step"==r&&(r+=e);var t=jQuery.Event("rx_navigation_set");t.step_number=e,t.step_object=rx[this.map[e]],t.step_naw=r,jQuery(this.rx_form).trigger(t)},setProgress:function(e){switch(e){case 250:jQuery("#step250 .onsale").show()}var r=["LENS TYPE","ENTER YOUR PRESCRIPTION","LENS TINT OPTION","LENS MATERIAL & THICKNESS","LENS COATING","REVIEW ORDER",""];switch(e){case 150:jQuery("#progress-step-name").show().text("I need lenses for:");break;case 170:jQuery("#progress-step-name").show().html("Please select your office size or the required distance at which you wish the lenses to have the best performance.<br>IMPORTANT: Increased distance will narrow the reading area.<br><br>");break;case 250:jQuery("#progress-step-name").show().text("LENS TYPE")}jQuery("#progress-step-name").show().text(r[e-1]);var t=jQuery(".container.rx-form-container");2!==e&&3!==e&&4!==e&&5!==e&&6!==e&&7!==e||(jQuery("html, body").animate({scrollTop:0},500),jQuery("#div_rush_check").on("click",function(){jQuery("#div_rush_check").hasClass("option_selected")?setTimeout(function(){jQuery("#div_rush_check").addClass("option_selected")},0):jQuery("#div_rush_check").hasClass("option_selected")||setTimeout(function(){jQuery("#div_rush_check").removeClass("option_selected")},0)})),2===e?(rx.set("package",""),t.addClass("is-step-2"),jQuery("#nb_step2").on("click","button.last",function(e){e.preventDefault(),0===jQuery("#pd_1 option:selected").val()&&rx.alert("Please Select A Pupillary Distance")}),rx.prescription.segOC_toggle()):t.removeClass("is-step-2"),7===e?(jQuery(".rx-form-container").on("click",".selector_check",function(e,r){}),jQuery("#progress-step-name").css("margin-bottom",0).css("margin",0),jQuery(".rx-form-container").on("click",".selector_option",function(e){var r=jQuery(e.target);jQuery("[data-group='tint_color']").removeClass("color_button_border"),r.removeClass("color_button_border"),r.addClass("color_button_border")})):(jQuery("#progress-step-name").css("margin-bottom",20).css("margin","0.67em"),jQuery(".container.rx-form-container").removeClass("is-step-7"))},reset:function(e,r){var t=e,a=r=r||0;switch(0===a&&(a=e+1),e){case 7:a=7,t=2,jQuery("#rx_package").val("");break;case 8:a=6,t=7}switch(this.move(a,t),e){case 2:rx.lensColor.reset(),jQuery("#rx_package").val(""),jQuery(".wrap-free-packages").removeClass("extras-on").hide();break;case 3:rx.package.reset();break;case 5:rx.previewOrder.showOrderSummary();break;case 6:break;case 250:jQuery(".onsale").show();case 7:rx.reset("uv"),rx.reset("scratch"),jQuery("#include").html(""),jQuery(".wrap-free-packages").hide(),jQuery("#package_step6").hide(),jQuery(".onsale").hide(),jQuery("#rx_right").show(),jQuery(".rx-add-lens-package-top").hide(),jQuery("#rx_right_packages").hide(),jQuery("#progress-step-name").show(),rx.fee.hideMaterial(),rx.fee.hideTint(),rx.fee.hideCoating(),rx.fee.hideEasyClean(),rx.diamond.hideDiamond();break;case 8:rx.previewOrder.showOrderSummary(),jQuery("#nb_step8").hide()}},hideRx:function(){jQuery(".product--right-content").show(),jQuery(".product-description-block").show(),jQuery(".product--related-products").show(),jQuery(".product--shipping-returns").show(),jQuery(".onsale").show(),jQuery(".images").show(),jQuery(".summary").show(),jQuery("#mirror_placeholder").show(),jQuery("#order_type").show(),jQuery(".related").show(),jQuery("#get_lenses").html(""),jQuery(".yotpo.yotpo-main-widget").show(),jQuery(".secure-icons-wrap").removeClass("icons-RX"),"function"==typeof checkFrameFitsMe&&checkFrameFitsMe(),jQuery(".rx-form-container").trigger("rx-hidden")},toPrescription:function(){jQuery("#rx_right").show(),jQuery("#progress-step-name").hide(),jQuery(".rx-packages").show(),jQuery(".button-hide-container").show(),jQuery(".rx-add-lens-package-top").show()}},Rx.prototype.alert=function(e){var r=jQuery("#alertError");r.length?(r.find(".popup-rx-text").html(e),r.foundation("open")):alert(e)},Rx.prototype.label=function(e,r){if(e in r)return"Your Frames"==jQuery("#order_ftype").text()&&"rush"==e?"Two-Way Rush Service":r[e];console.error("_elements has no index - ",e)};var rx=new Rx;jQuery(function(e,r){e("#order_rx, #order_fashion").on("click",load_lens_options),e("#combine").on("click",CombineCart);var t=e("body.single-product .summary.entry-summary .variations_form");t.on("show_variation",function(e,r){rx_cart_params.price=r.display_price,rx_cart_params.fprice=r.display_price,rx_cart_params.frame_regular_price=r.display_regular_price}),t.on("found_variation",function(r,t){e.each(t.attributes,function(e,r){"attribute_pa_color"===e&&jQuery("#ong_color_select").val(r)})}).on("reset_data",function(){jQuery("#ong_color_select").val("")}),jQuery(document).on("rx-loaded",function(){var r=e(".rx-form-container");rx.diamond.init(r),rx.fee.init(r),setTimeout(function(){rx.price.calculate()},0),r.on("click",".rx-color-selector",rx.lensColor.setColor),r.on("click",".material-selector",rx.package.initPackage);var t=0;r.on("rx_source_change",function(e){1===++t&&setTimeout(function(){rx.price.calculate(),t=0})}),r.on("click",".rx-product-icon>img, .rx-product-icon>p",function(e){e.preventDefault();var r=jQuery(this),t=r.data("content"),a=jQuery("#modalRXpackages"),s=r.attr("src");a.find(".icon-packages").html('<img src="'+s+'">'),a.find(".description-packages").html("<p>"+t+"</p>"),a.foundation("open")}),jQuery("#modalRXpackages a.close").on("click",function(){jQuery(this).parent().foundation("close")}),r.on("rx_step_set",function(e){switch(e.step_number){case 1:!1===rx.usage.checked()?(rx.alert("Please select your prescription type first."),e.stopImmediatePropagation()):rx.get("usage")===rx.usage.labels("progressive")&&!1===rx.purpose.checked()?(rx.alert("Please select a purpose first."),e.stopImmediatePropagation()):rx.get("usage")===rx.usage.labels("progressive")&&rx.get("purpose")===rx.purpose.labels("office")&&!1===rx.distance.checked()&&(rx.alert("Please select a distance first."),e.stopImmediatePropagation());break;case 150:!1===rx.usage.checked()&&rx.get("usage")===rx.usage.labels("progressive")&&(rx.alert("Please select your prescription type first."),e.stopImmediatePropagation());break;case 170:!1===rx.purpose.checked()&&rx.get("purpose")===rx.purpose.labels("office")&&(rx.alert("Please select a distance first."),e.stopImmediatePropagation());break;case 2:case 250:try{rx.prescription.validate()||e.stopImmediatePropagation()}catch(r){rx.alert(r.message),e.stopImmediatePropagation()}break;case 3:jQuery("#step4").hide(),!1!==rx.lensColor.validate()&&!1!==rx.lensColor.validateOptions()||e.stopImmediatePropagation();break;case 4:""===rx.get("package")&&(rx.alert("Please select lens package"),e.stopImmediatePropagation())}e.validated=!0}),r.on("rx_step_set",function(e){if(1===e.step_number&&e.validated){var r=localStorage.getItem("rx_data")?JSON.parse(localStorage.getItem("rx_data")):{};r.usage=r.usage||{},r.usage.type=rx.get("usage"),r.usage.impact_resistant=rx.get("impact"),r&&localStorage.setItem("rx_data",JSON.stringify(r))}2===e.step_number&&e.validated&&((r=localStorage.getItem("rx_data")?JSON.parse(localStorage.getItem("rx_data")):{}).prescription=r.prescription||{},r.prescription=rx.prescription.parseRx(),r&&localStorage.setItem("rx_data",JSON.stringify(r)))}),r.on("rx_step_set",function(e){var r=e.step_number;switch(r){case 1:case 3:case 4:rx.navigation.set(r);break;case 2:rx.prescription.checkSphereSigns()&&(rx.navigation.toPrescription(),rx.package.init("preset",function(){rx.navigation.move(2,7)}));break;case 150:case 170:case 250:rx.navigation.set(r-1)}}),r.on("rx_navigation_set",function(e){var r=e.step_object,t=jQuery(e.step_naw),a=jQuery("#step"+e.step_number);a.data("initialized")||void 0===r||void 0===r.step_init||(r.step_init(jQuery(this)),a.data("initialized",!0)),t.show()}),setTimeout(function(){jQuery(".wp-post-image").attr("src");var e=jQuery(".product--name-title").text();if(jQuery("#pa_color").length>0){var t=jQuery('[data-attribute_name="attribute_pa_size"] > span.selected').attr("title");t=t?" ("+t+")":"",e=e+" - "+jQuery('[data-attribute_name="attribute_pa_color"] > span.selected').attr("title")+t}window.scrollTo(0,60),jQuery("#order_ftype").text(e),jQuery("#frame_title").text(e),"fashion"!==rx.prescription.get("d","mode",!1)?(jQuery("#enhance_rx_accuracy").hide(),jQuery("#div_coat_hard_tile").removeClass("selector_tile").addClass("border_orange")):(jQuery("#nb_step3").show(),jQuery("#step3").show(),jQuery("#rx_progress").hide()),r.on("click",".selector",function(){var e=jQuery(this).data("group");jQuery("div[data-group='"+e+"_tile']").removeClass("border_orange").addClass("selector_tile"),jQuery("div[data-group='check_"+e+"']").removeClass("option_selected").html("").addClass("selector_check_passive");var r="#"+jQuery(this).attr("id")+"_check",t="#"+jQuery(this).attr("id")+"_tile";jQuery(t).removeClass("selector_tile").addClass("border_orange"),jQuery(r).removeClass("selector_check_passive").addClass("option_selected");var a=jQuery(this).attr("id");jQuery(".rx-extra-section_"+a).show()});jQuery(".ong_checkbox").click(function(){var e="#"+jQuery(this).attr("id")+"_state";"0"===jQuery(e).val()?(jQuery(e).val("1"),jQuery(this).removeClass("selector_check_passive").addClass("option_selected")):(jQuery(this).html(""),jQuery(e).val("0"),jQuery(this).removeClass("option_selected"),jQuery(this).addClass("selector_check_passive"))}),jQuery(".rx_link").css("cssText","background: none !important; font-size: 16px !important; color:#353648 !important; font-weight: bold"),jQuery("span[rel=tooltip]").mouseover(function(e){var r=jQuery(this).attr("title");jQuery(this).attr("title",""),jQuery(this).append('<div id="tooltip"><div class="tipHeader"></div><div class="tipBody">'+r+"</div></div>"),jQuery("#tooltip").show().css("left",-120)}).mousemove(function(e){}).mouseout(function(){jQuery(this).attr("title",jQuery(".tipBody").html()),jQuery(this).children("div#tooltip").remove()}),jQuery(".rx-form-container").on("click",".selector_check",function(e,r){var t=jQuery(e.target).data("orderLensDesignImg");if(t){var a=jQuery("<img src='"+t+"' style='width: 100%;'>");jQuery("#order_lens_design").empty().append(a)}})},0),jQuery(r).foundation()})}),function(e,r){"use strict";var t=function(){};t.prototype.start=function(){console.log("loader start"),r(".wrap-loader").show()},t.prototype.stop=function(){console.log("loader stop"),r(".wrap-loader").hide()},e.loader=e.loader||new t}(window,jQuery),jQuery(document).ready(function(){window.location.pathname.indexOf("product_category")>0&&jQuery(".variations_button").hide(),jQuery("#pa_color").length>0&&(options=jQuery("#pa_color").html(),jQuery("#ong_color_select").html(options),jQuery("#ong_color").show())});