import videoFail from"../../js/vm.js";(function(){"use strict";var t="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t};var e=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var i=t[e];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);var i="function"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};!function(i,o){if(o)t:{var n=e;i=i.split(".");for(var r=0;r<i.length-1;r++){var a=i[r];if(!(a in n))break t;n=n[a]}(o=o(r=n[i=i[i.length-1]]))!=r&&null!=o&&t(n,i,{configurable:!0,writable:!0,value:o})}}("Object.assign",(function(t){return t||i}));var o=this||self,n={facingMode:"user",width:640,height:480};function r(t,e){this.video=t,this.h=0,this.g=Object.assign(Object.assign({},n),e)}function a(t){window.requestAnimationFrame((function(){!function(t){var e=null;t.video.paused||t.video.currentTime===t.h||(t.h=t.video.currentTime,e=t.g.onFrame()),e?e.then((function(){a(t)})):a(t)}(t)}))}r.prototype.start=function(){var t=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||videoFail();var e=this.g;return navigator.mediaDevices.getUserMedia({video:{facingMode:e.facingMode,width:e.width,height:e.height}}).then((function(e){!function(t,e){t.video.srcObject=e,t.video.onloadedmetadata=function(){t.video.play(),a(t)}}(t,e)})).catch((function(t){throw videoFail(),t}))},r.prototype.stop=function(){this.video.srcObject.getTracks()[0].stop()};var c,f=["Camera"],s=o;f[0]in s||void 0===s.execScript||s.execScript("var "+f[0]);for(;f.length&&(c=f.shift());)f.length||void 0===r?s=s[c]&&s[c]!==Object.prototype[c]?s[c]:s[c]={}:s[c]=r}).call(this);
