var ong_all_filters=ong_all_filters||{},ong_sort_options,ong_runned_filters=0;window.onpopstate=function(t){if(t.state&&void 0!==t.state.filter){var e=jQuery.Event("ong_filter_updated");e.params=unpack_filter(t.state.filter),e.original_event=t,$(document.body).trigger(e),console.info("window.onpopstate",e)}},window.onhashchange=function(t){console.log("onhashchange: location: "+document.location.href)};var search_only=!!ong_filter_params.search_only;search_only||"undefined"!=typeof initial_filter&&void 0!==initial_filter.filter&&initial_filter.filter&&(ong_all_filters=initial_filter.filter),jQuery(function(t){"use strict";jQuery(":not(.single-product) ul.products");var e=jQuery(".ong-filter-wrapper ul.products");t(document.body).on("ong_filter_content_reloaded",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})});var i=function(e){var i={};return t.each(e,function(e,n){(!t.isArray(n)||t.isArray(n)&&n.length>0)&&(i[e]=t.isArray(n)?n.join():n)}),i};if("undefined"!=typeof ong_filter_shortcode_params&&"undefined"!==ong_filter_shortcode_groups){var n=t("ul.ong-filter"),r=t("ul.ong-filter[data-menu-id='desktopMenuFilter']"),o=t("ul.ong-filter[data-menu-id='mobileMenuFilter']"),a=t(".filter-button");r.hasClass("menu")&&a.on("click",function(){r.foundation("hideAll")}),o.hasClass("accordion")&&a.on("click",function(){o.foundation("up",n.find(".is-active .accordion-content"))}),a.on("click",function(e){t(document.body).trigger("ong_filter_start_search")}),t(".ong-filter-dropdown-pane").on("hide.zf.dropdown",function(e){t(document.body).trigger("ong_filter_start_search")}),n.on("up.zf.accordionMenu",function(e){t(document.body).trigger("ong_filter_start_search")}),t(document.body).on("ong_filter_start_search",function(e){var i=0;t.each(n.find("li.filter-sort-wrapper .radio-container input[type=radio]:checked"),function(){var e=t(this),n=[e.data("sortType"),e.data("sortDirection")];JSON.stringify(ong_sort_options)!==JSON.stringify(n)&&(ong_sort_options=n,i++)}),i&&(ong_runned_filters++,t(document.body).trigger("ong_filter_updated"))}),t(document.body).bind("ong_filter_updated",function(r){if(n.find("ul input[type=checkbox]").disable=!0,"undefined"===r.filter_name&&"undefined"===r.filter_type){var o=r.filter_name,a=r.filter_type;r.filter_key;void 0===ong_all_filters[a]&&(ong_all_filters[a]={}),ong_all_filters[a][o]=r.params}if(!(--ong_runned_filters>0)){setTimeout(function(){var n={filter:i(ong_all_filters),result:l(ong_all_filters),x_params:ong_filter_shortcode_x_params,action:"ong/if_filter",PageSpeed:"on",PageSpeedFilters:"rewrite_images,convert_jpeg_to_webp,extend_cache,responsive_images,resize_images;"};n[ong_filter_params.page_param]=r.page?r.page:1,void 0===ong_sort_options&&(ong_sort_options=[ong_filter_params.sort_options.type,ong_filter_params.sort_options.direction]),void 0!==ong_sort_options&&(n.sort_options=ong_sort_options.join()),jQuery.ajax({url:ong_filter_params.ajaxurl,type:"GET",dataType:"html",data:n}).done(function(t,i,n){e.html(t)}).fail(function(){alert("Error: "+xhr.status+": "+xhr.statusText),e.html(ong_filter_params.no_results)}).always(function(){delete n.action,void 0===r.original_event&&history.pushState(n,"",ong_filter_params.current_url+"?"+t.param(n))})});var l=function(e){var i=t(".btn-wrap"),r=t(".container-result-filter"),o=t(".filter-result-wrap");o.empty(),r.hide(),t.each(n.find(".accordion-content li input[type=checkbox]:checked"),function(){[].push(t(this).val());var e=t("<li>"+t(this).val()+"</li>"),l=t("<a class='clear-item' data-result-li='"+t(this).val()+"'><i class='fa fa-times' aria-hidden='true'></i></a>").on("click",function(){var i=t(this).attr("data-result-li");t('input[value="'+i+'"]:checked').prop("checked",!1),e.remove(),t(document.body).trigger("ong_filter_start_search")});e.append(l),o.append(e),i.show(),r.show(),t("#clearAll").on("click",function(){var e=n.find("li.filter--ong-filter-item ul[data-filter-type="+a+"]").parent();e.attr("data-has-something-inside",!1).removeClass("has-something-inside").hide(),n.find(".accordion-title").removeAttr("data-checked-count"),e.find("ul.filter--ong-filter-group li").remove(),t("input:checked").prop("checked",!1),t(document.body).trigger("ong_filter_start_search"),o.empty(),i.hide(),r.hide()})});var l=jQuery("ul.filter-result-wrap li").size();t(".current-filter").attr("current-count-of-filter",l)}}})}});